/* ==========
   Theme vars
   ========== */
:root {
  /* cores por nível (light) */
  --impact-l1-bg: rgba(63,81,181,.06);
  --impact-l1-bd: rgba(63,81,181,.24);
  --impact-l2-bg: rgba(63,81,181,.05);
  --impact-l2-bd: rgba(63,81,181,.18);
  --impact-l3-bg: rgba(63,81,181,.04);
  --impact-l3-bd: rgba(63,81,181,.14);
  --impact-l4-bg: rgba(63,81,181,.035);
  --impact-l4-bd: rgba(63,81,181,.12);
  --impact-leaf-bg: rgba(0,0,0,.04);
  --impact-pill: #1a237e;
  --impact-shadow: 0 2px 8px rgba(0,0,0,.06);
  --impact-shadow-open: 0 6px 18px rgba(0,0,0,.10);
}

/* Dark mode (Material for MkDocs -> scheme "slate") */
[data-md-color-scheme="slate"] {
  --impact-l1-bg: rgba(120,144,255,.10);
  --impact-l1-bd: rgba(120,144,255,.30);
  --impact-l2-bg: rgba(120,144,255,.08);
  --impact-l2-bd: rgba(120,144,255,.24);
  --impact-l3-bg: rgba(120,144,255,.07);
  --impact-l3-bd: rgba(120,144,255,.20);
  --impact-l4-bg: rgba(120,144,255,.06);
  --impact-l4-bd: rgba(120,144,255,.18);
  --impact-leaf-bg: rgba(255,255,255,.06);
  --impact-pill: #c5cae9;
  --impact-shadow: 0 2px 8px rgba(0,0,0,.35);
  --impact-shadow-open: 0 8px 22px rgba(0,0,0,.45);
}

/* ==============
   Container/header
   ============== */
.impact-tree { margin: 10px 0 28px 0; }
.impact-title {
  font-weight: 700;
  margin: 0 0 8px 0;
  color: var(--md-default-fg-color);
  letter-spacing: .2px;
}

/* =====================
   Card (details/summary)
   ===================== */
details.impact {
  border: 1px solid var(--impact-l1-bd);
  border-radius: 14px;
  padding: 8px 12px;
  margin: 10px 0;
  background: var(--impact-l1-bg);
  box-shadow: var(--impact-shadow);
  transition: box-shadow .18s ease, transform .12s ease, background .2s ease, border-color .2s ease;
}
details.impact:hover {
  transform: translateY(-1px);
  box-shadow: var(--impact-shadow-open);
}

/* recuo por nível + gradação de cor */
details.impact.level-1 { margin-left: 0;   background: var(--impact-l1-bg); border-color: var(--impact-l1-bd); }
details.impact.level-2 { margin-left: 12px; background: var(--impact-l2-bg); border-color: var(--impact-l2-bd); }
details.impact.level-3 { margin-left: 24px; background: var(--impact-l3-bg); border-color: var(--impact-l3-bd); }
details.impact.level-4 { margin-left: 36px; background: var(--impact-l4-bg); border-color: var(--impact-l4-bd); }
details.impact.level-5 { margin-left: 48px; background: var(--impact-l4-bg); border-color: var(--impact-l4-bd); }

/* cabeçalho clicável */
details.impact > summary {
  cursor: pointer;
  list-style: none;
  outline: none;
  font-weight: 600;
  color: var(--impact-pill);
  display: flex;
  align-items: center;
  gap: 8px;
  user-select: none;
}

/* bullet e caret */
details.impact > summary::before {
  content: "▸";
  display: inline-block;
  transform: translateY(-1px);
  opacity: .7;
  transition: transform .15s ease, opacity .15s ease;
}
details.impact[open] > summary::before {
  content: "▾";
  opacity: .9;
}

/* “chip” circular à esquerda (estilo status) */
details.impact > summary::after {
  content: "";
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: var(--impact-pill);
  opacity: .75;
}

/* conteúdo interno abre com transição suave */
details.impact[open] {
  animation: impact-open .18s ease-out;
}
@keyframes impact-open {
  from { transform: translateY(-1px); opacity: .96; }
  to   { transform: translateY(0);    opacity: 1; }
}

/* folhas (nós sem filhos) */
.impact-leaf {
  margin: 8px 0 8px 26px;
  padding: 6px 10px;
  background: var(--impact-leaf-bg);
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.impact-leaf::before {
  content: "•";
  color: var(--impact-pill);
  opacity: .7;
  transform: translateY(-1px);
}

/* loops/ciclos */
.impact-leaf.cyc {
  background: rgba(244,67,54,.10);
  color: #b71c1c;
  box-shadow: none;
}
[data-md-color-scheme="slate"] .impact-leaf.cyc {
  background: rgba(244,67,54,.18);
  color: #ff8a80;
}

/* tabelas acima da árvore: dar espaço */
.md-typeset table + .impact-tree { margin-top: 12px; }
